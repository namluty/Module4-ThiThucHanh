<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
        integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
        crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-12" style="margin-top: 20px; width: 350px">

            <h1 class="alert alert-danger" style="color: blue; font-size: 20px">Form Create City</h1><br>
            <!--ID -->
            <input id="id" type="hidden">
            <!-- NameCity -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Name City</span>
                </div>
                <input id="namecity" type="text" class="form-control" placeholder="Name City">
            </div>
            <!-- National -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">National</span>
                </div>
                <input id="national" type="text" class="form-control" placeholder="National">
            </div>
            <!-- Area -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Area</span>
                </div>
                <input id="area" type="number" class="form-control" placeholder="Area">
            </div>
            <!-- Population -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Population</span>
                </div>
                <input id="population" type="number" class="form-control" placeholder="Population">
            </div>
            <!-- GDP -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">GDP</span>
                </div>
                <input id="gdp" type="number" class="form-control" placeholder="GDP">
            </div>
            <!-- Description -->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Description</span>
                </div>
                <input id="description" type="text" class="form-control" placeholder="Description">
            </div>
            <button id="btn-create" type="button" class="btn btn-primary">Create</button>
        </div>
    </div>
</div>
</body>
<script>
    //CREATE
    $(document).ready(function () {
        let city = {};
        let noCity = {
            message: "no_city"
        }
        let createSuccess = {
            message: "create_success"
        }
        let updateSuccess = {
            message: "update_success"
        }
        $('#btn-create').click(function () {
            city.nameCity = $('#namecity').val();
            city.national = $('#national').val();
            city.area = $('#area').val();
            city.population = $('#population').val();
            city.gdp = $('#gdp').val();
            city.description = $('#description').val();
            changeURL = '';
            changeMethod = '';
            let cityOBJ = JSON.stringify(city);
            let id = $('#id').val();
            if (id) {
                changeURL = 'http://localhost:8080/city/' + id;
                changeMethod = 'PUT'
            } else {
                changeURL = 'http://localhost:8080/city',
                    changeMethod = 'POST'
            }
            $.ajax({
                url: changeURL,
                method: changeMethod,
                contentType: 'application/json; charset=utf8',
                data: cityOBJ,
                success: function (data) {
                    if (JSON.stringify(data) == JSON.stringify(noCity)) {
                    }
                    if (JSON.stringify(data) == JSON.stringify(createSuccess)) {
                    }
                    if (JSON.stringify(data) == JSON.stringify(updateSuccess)) {
                    }
                }
            }
        }
</script>
</html>